(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{1076:function(e,t,s){Promise.resolve().then(s.bind(s,6047))},6047:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return CustomerQuoteView}});var r=s(7437),a=s(2265);let n={id:"QT-2024-001",status:"sent",createdAt:"2024-01-15",validUntil:"2024-02-15",company:{name:"Green Valley Landscaping",phone:"(555) 123-4567",email:"info@greenvalley.com",logo:null,address:"456 Business Ave, Sacramento, CA 95814"},customer:{name:"John Smith",phone:"(555) 987-6543",email:"john@email.com",address:"123 Oak Street, San Jose, CA 95123"},items:[{description:"Front yard lawn mowing (1/4 acre)",quantity:1,unit:"each",price:45,total:45},{description:"Hedge trimming - front yard",quantity:1,unit:"each",price:65,total:65},{description:"Edge trimming along walkway & driveway",quantity:1,unit:"each",price:25,total:25},{description:"Gutter cleaning",quantity:1,unit:"each",price:95,total:95},{description:"Yard debris cleanup & haul away",quantity:1,unit:"each",price:50,total:50}],hasOptions:!0,options:[{name:"Good",description:"Essential maintenance",items:["Lawn mowing","Edge trimming"],total:70},{name:"Better",description:"Recommended package",items:["Lawn mowing","Edge trimming","Hedge trimming","Cleanup"],total:185},{name:"Best",description:"Complete service",items:["All services including gutter cleaning"],total:280}],subtotal:280,taxRate:8.25,taxAmount:23.1,discount:0,total:303.1,notes:"Work will be completed within 1-2 business days of approval. All debris will be hauled away. Please ensure gate access is available.",terms:"Payment due upon completion. We accept cash, check, and all major credit cards."};function CustomerQuoteView(e){let{params:t}=e,[s]=(0,a.useState)(n),[l,i]=(0,a.useState)(s.hasOptions?1:null),[o,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[u,g]=(0,a.useState)("viewing"),[p,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(""),[j,f]=(0,a.useState)(!1),N=(0,a.useRef)(null),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(o&&N.current){let e=N.current;e.width=2*e.offsetWidth,e.height=2*e.offsetHeight,e.style.width="".concat(e.offsetWidth,"px"),e.style.height="".concat(e.offsetHeight,"px");let t=e.getContext("2d");t&&(t.scale(2,2),t.lineCap="round",t.strokeStyle="#1a365d",t.lineWidth=2,w.current=t)}},[o]);let startDrawing=e=>{let t=N.current;if(!t||!w.current)return;let s=t.getBoundingClientRect(),r="touches"in e?e.touches[0].clientX-s.left:e.nativeEvent.offsetX,a="touches"in e?e.touches[0].clientY-s.top:e.nativeEvent.offsetY;w.current.beginPath(),w.current.moveTo(r,a),h(!0)},draw=e=>{if(!m||!w.current||!N.current)return;let t=N.current.getBoundingClientRect(),s="touches"in e?e.touches[0].clientX-t.left:e.nativeEvent.offsetX,r="touches"in e?e.touches[0].clientY-t.top:e.nativeEvent.offsetY;w.current.lineTo(s,r),w.current.stroke()},stopDrawing=()=>{w.current&&w.current.closePath(),h(!1)},getSelectedTotal=()=>s.hasOptions&&null!==l?s.options[l].total:s.total,getSelectedTax=()=>{let e=s.hasOptions&&null!==l?s.options[l].total:s.subtotal;return e*(s.taxRate/100)},getFinalTotal=()=>{let e=getSelectedTotal(),t=getSelectedTax();return e+t-s.discount},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),S=new Date(s.validUntil)<new Date;return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[s.company.logo?(0,r.jsx)("img",{src:s.company.logo,alt:s.company.name,className:"h-12"}):(0,r.jsx)("h1",{className:"text-2xl font-bold text-navy-500",children:s.company.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s.company.phone})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Quote #",s.id]}),(0,r.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mt-1 ".concat("approved"===u?"bg-green-100 text-green-700":"rejected"===u?"bg-red-100 text-red-700":S?"bg-gray-100 text-gray-700":"bg-gold-100 text-gold-700"),children:"approved"===u?"✓ Approved":"rejected"===u?"Declined":S?"Expired":"Awaiting Response"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:["approved"===u&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6 mb-6 text-center",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83C\uDF89"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-700 mb-2",children:"Quote Approved!"}),(0,r.jsx)("p",{className:"text-green-600 mb-4",children:"Thank you for your business! We'll be in touch shortly to schedule your service."}),c&&(0,r.jsx)("div",{className:"inline-block p-2 bg-white rounded border border-green-200",children:(0,r.jsx)("img",{src:c,alt:"Your signature",className:"h-16"})})]}),"rejected"===u&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6 text-center",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDE14"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-red-700 mb-2",children:"Quote Declined"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"We're sorry this quote didn't work out. Feel free to reach out if you'd like to discuss other options."}),y&&(0,r.jsxs)("p",{className:"text-sm text-red-500",children:["Reason: ",y]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Prepared for"}),(0,r.jsx)("div",{className:"font-semibold text-navy-500",children:s.customer.name}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:s.customer.address})]}),(0,r.jsxs)("div",{className:"md:text-right",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Quote Date"}),(0,r.jsx)("div",{className:"font-medium text-navy-500",children:formatDate(s.createdAt)}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Valid Until"}),(0,r.jsxs)("div",{className:"font-medium ".concat(S?"text-red-500":"text-navy-500"),children:[formatDate(s.validUntil),S&&" (Expired)"]})]})]})}),s.hasOptions&&"viewing"===u&&!S&&(0,r.jsxs)("div",{className:"p-6 bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("h3",{className:"font-semibold text-navy-500 mb-4",children:"Choose Your Package"}),(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:s.options.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>i(t),className:"p-4 rounded-xl border-2 transition-all text-left ".concat(l===t?"border-gold-500 bg-white shadow-md":"border-gray-200 bg-white hover:border-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:0===t?"⭐":1===t?"⭐⭐":"⭐⭐⭐"}),1===t&&(0,r.jsx)("span",{className:"text-xs bg-gold-500 text-navy-900 px-2 py-0.5 rounded-full font-medium",children:"Popular"})]}),(0,r.jsx)("div",{className:"font-bold text-navy-500",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-navy-500",children:["$",e.total]}),(0,r.jsx)("ul",{className:"mt-2 space-y-1",children:e.items.map((e,t)=>(0,r.jsxs)("li",{className:"text-xs text-gray-500 flex items-start gap-1",children:[(0,r.jsx)("span",{className:"text-gold-500",children:"✓"}),e]},t))})]},e.name))})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-navy-500 mb-4",children:"Service Details"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-500",children:"Description"}),(0,r.jsx)("th",{className:"text-center py-2 text-sm font-medium text-gray-500 w-16",children:"Qty"}),(0,r.jsx)("th",{className:"text-right py-2 text-sm font-medium text-gray-500 w-24",children:"Price"}),(0,r.jsx)("th",{className:"text-right py-2 text-sm font-medium text-gray-500 w-24",children:"Total"})]})}),(0,r.jsx)("tbody",{children:s.items.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{className:"py-3 text-navy-500",children:e.description}),(0,r.jsx)("td",{className:"py-3 text-center text-gray-600",children:e.quantity}),(0,r.jsxs)("td",{className:"py-3 text-right text-gray-600",children:["$",e.price.toFixed(2)]}),(0,r.jsxs)("td",{className:"py-3 text-right font-medium text-navy-500",children:["$",e.total.toFixed(2)]})]},t))})]})}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("div",{className:"w-64 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-navy-500",children:["$",getSelectedTotal().toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["Tax (",s.taxRate,"%)"]}),(0,r.jsxs)("span",{className:"text-navy-500",children:["$",getSelectedTax().toFixed(2)]})]}),s.discount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsx)("span",{children:"Discount"}),(0,r.jsxs)("span",{children:["-$",s.discount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-xl font-bold pt-2 border-t border-gray-200",children:[(0,r.jsx)("span",{className:"text-navy-500",children:"Total"}),(0,r.jsxs)("span",{className:"text-gold-600",children:["$",getFinalTotal().toFixed(2)]})]})]})})})]}),s.notes&&(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:s.notes})]})}),s.terms&&(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsx)("div",{className:"text-xs text-gray-500",children:s.terms})})]}),c&&"viewing"===u&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Your Signature"}),(0,r.jsx)("img",{src:c,alt:"Signature",className:"h-16 border border-gray-200 rounded p-1"})]}),(0,r.jsx)("button",{onClick:()=>{x(null),d(!0)},className:"text-sm text-gold-600 hover:text-gold-700",children:"Re-sign"})]})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-navy-500",children:"Sign to Approve"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Draw your signature below"})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50 relative",children:[(0,r.jsx)("canvas",{ref:N,className:"w-full h-40 cursor-crosshair touch-none",onMouseDown:startDrawing,onMouseMove:draw,onMouseUp:stopDrawing,onMouseLeave:stopDrawing,onTouchStart:startDrawing,onTouchMove:draw,onTouchEnd:stopDrawing}),(0,r.jsx)("div",{className:"absolute bottom-2 left-2 right-2 border-t border-gray-300 pointer-events-none",children:(0,r.jsx)("span",{className:"text-xs text-gray-400 bg-gray-50 px-1 relative -top-2",children:"Sign here"})})]})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200 flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{let e=N.current;e&&w.current&&w.current.clearRect(0,0,e.width,e.height),x(null)},className:"flex-1 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear"}),(0,r.jsx)("button",{onClick:()=>d(!1),className:"flex-1 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(N.current){let e=N.current.toDataURL("image/png");x(e),d(!1)}},className:"flex-1 py-2 bg-gold-500 text-navy-900 rounded-lg hover:bg-gold-600 transition-colors font-medium",children:"Save"})]})]})}),p&&"viewing"===u&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-navy-500 mb-3",children:"Why are you declining?"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"This helps us improve our quotes (optional)"}),(0,r.jsx)("div",{className:"space-y-2 mb-4",children:["Price too high","Found another provider","Project cancelled","Need different services","Other"].map(e=>(0,r.jsx)("button",{onClick:()=>v(e),className:"w-full p-3 text-left rounded-lg border transition-colors ".concat(y===e?"border-navy-500 bg-navy-50":"border-gray-200 hover:border-gray-300"),children:e},e))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>b(!1),className:"flex-1 py-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(!p){b(!0);return}f(!0),setTimeout(()=>{f(!1),g("rejected")},1e3)},disabled:j,className:"flex-1 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50",children:j?"Processing...":"Decline Quote"})]})]}),"viewing"===u&&!S&&!p&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("button",{onClick:()=>{if(!c){d(!0);return}f(!0),setTimeout(()=>{f(!1),g("approved")},1500)},disabled:j,className:"flex-1 py-4 bg-green-500 hover:bg-green-600 text-white rounded-xl font-semibold text-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):c?(0,r.jsxs)(r.Fragment,{children:["✓ Approve Quote ($",getFinalTotal().toFixed(2),")"]}):(0,r.jsx)(r.Fragment,{children:"✍️ Sign & Approve"})}),(0,r.jsx)("button",{onClick:()=>b(!0),className:"sm:w-auto px-6 py-4 border-2 border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"Decline"})]}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Questions? Call us at"," ",(0,r.jsx)("a",{href:"tel:".concat(s.company.phone),className:"text-gold-600 font-medium",children:s.company.phone})]})})]}),S&&"viewing"===u&&(0,r.jsxs)("div",{className:"bg-gray-100 rounded-xl p-6 text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:"⏰"}),(0,r.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"This quote has expired"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Please contact us for an updated quote."}),(0,r.jsxs)("a",{href:"tel:".concat(s.company.phone),className:"inline-block px-6 py-3 bg-gold-500 text-navy-900 rounded-lg font-semibold hover:bg-gold-600 transition-colors",children:["Call ",s.company.phone]})]}),(0,r.jsx)("div",{className:"mt-8 text-center text-sm text-gray-400",children:(0,r.jsxs)("p",{children:["Powered by ",(0,r.jsx)("span",{className:"font-semibold",children:"ToolTime Pro"})]})})]})]})}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,n={},d=null,c=null;for(r in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!o.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:d,ref:c,props:n,_owner:i.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=1076)}),_N_E=e.O()}]);