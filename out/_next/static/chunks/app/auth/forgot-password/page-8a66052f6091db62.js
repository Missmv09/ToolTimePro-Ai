(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{2898:function(e,r,t){"use strict";t.d(r,{Z:function(){return createLucideIcon}});var n=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,r)=>{let t=(0,n.forwardRef)(({color:t="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:u,...c},d)=>(0,n.createElement)("svg",{ref:d,...a,width:s,height:s,stroke:t,strokeWidth:i?24*Number(l)/Number(s):l,className:["lucide",`lucide-${toKebabCase(e)}`,o].join(" "),...c},[...r.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(u)?u:[u]]));return t.displayName=`${e}`,t}},3067:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3008:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8083:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.Z)("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]])},1295:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7624:function(e,r,t){Promise.resolve().then(t.bind(t,2924))},2924:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ForgotPasswordPage}});var n=t(7437),a=t(2265),s=t(1396),l=t.n(s),i=t(3008),o=t(8083),u=t(3067),c=t(1295),d=t(3549);function ForgotPasswordPage(){let{resetPassword:e}=(0,d.useAuth)(),[r,t]=(0,a.useState)(""),[s,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),handleSubmit=async t=>{t.preventDefault(),f(""),h(!0);let{error:n}=await e(r);if(n){f(n.message),h(!1);return}p(!0),h(!1)};return x?(0,n.jsx)("div",{className:"min-h-screen bg-navy-gradient flex flex-col items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(i.Z,{className:"w-8 h-8 text-green-600"})}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-navy-500 mb-2",children:"Check Your Email"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-6",children:["We sent a password reset link to ",(0,n.jsx)("strong",{children:r}),". Click the link to reset your password."]}),(0,n.jsx)(l(),{href:"/auth/login",className:"btn-primary w-full inline-block text-center",children:"Back to Login"})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-navy-gradient flex flex-col",children:[(0,n.jsx)("div",{className:"flex items-center justify-center pt-12 pb-8",children:(0,n.jsxs)(l(),{href:"/",className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-gold-500 rounded-xl flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-7 h-7 text-navy-500"})}),(0,n.jsx)("span",{className:"text-2xl font-bold text-white",children:"ToolTime Pro"})]})}),(0,n.jsx)("div",{className:"flex-1 flex items-start justify-center px-4 pb-12",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,n.jsxs)(l(),{href:"/auth/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-navy-500 mb-6",children:[(0,n.jsx)(u.Z,{size:20}),"Back to Login"]}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-navy-500 mb-2",children:"Reset Password"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Enter your email address and we'll send you a link to reset your password."}),(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"input-label",children:"Email Address"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,n.jsx)("input",{type:"email",value:r,onChange:e=>t(e.target.value),placeholder:"you@company.com",className:"input pl-10",required:!0})]})]}),m&&(0,n.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:m}),(0,n.jsx)("button",{type:"submit",disabled:s,className:"btn-secondary w-full py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,n.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("span",{className:"w-5 h-5 border-2 border-navy-500 border-t-transparent rounded-full animate-spin"}),"Sending..."]}):"Send Reset Link"})]})]})})]})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var n=t(7437),a=t(2265),s=t(7823);let l=(0,a.createContext)(void 0);function AuthProvider(e){let{children:r}=e,[t,i]=(0,a.useState)(null),[o,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),[f,x]=(0,a.useState)(!0),fetchUserData=async e=>{try{let{data:r,error:t}=await s.OQ.from("users").select("*").eq("id",e).single();if(t&&"PGRST116"!==t.code){console.error("Error fetching user:",t);return}if(r&&(u(r),r.company_id)){let{data:e,error:t}=await s.OQ.from("companies").select("*").eq("id",r.company_id).single();t?console.error("Error fetching company:",t):d(e)}}catch(e){console.error("Error in fetchUserData:",e)}};(0,a.useEffect)(()=>{let initializeAuth=async()=>{try{var e;let{data:{session:r}}=await s.OQ.auth.getSession();m(r),i(null!==(e=null==r?void 0:r.user)&&void 0!==e?e:null),(null==r?void 0:r.user)&&await fetchUserData(r.user.id)}catch(e){console.error("Error initializing auth:",e)}finally{x(!1)}};initializeAuth();let{data:{subscription:e}}=s.OQ.auth.onAuthStateChange(async(e,r)=>{var t;m(r),i(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),(null==r?void 0:r.user)?await fetchUserData(r.user.id):(u(null),d(null)),x(!1)});return()=>{e.unsubscribe()}},[]);let signUp=async(e,r,t,n)=>{try{let{data:a,error:l}=await s.OQ.auth.signUp({email:e,password:r,options:{data:{full_name:t}}});if(l)return{error:l};if(!a.user)return{error:Error("Failed to create user")};let{data:i,error:o}=await s.OQ.from("companies").insert({name:n,email:e}).select().single();if(o)return console.error("Error creating company:",o),{error:o};let{error:u}=await s.OQ.from("users").insert({id:a.user.id,email:e,full_name:t,company_id:i.id,role:"owner"});if(u)return console.error("Error creating user profile:",u),{error:u};return{error:null}}catch(e){return console.error("Signup error:",e),{error:e}}},signIn=async(e,r)=>{try{let{error:t}=await s.OQ.auth.signInWithPassword({email:e,password:r});if(t)return{error:t};return{error:null}}catch(e){return{error:e}}},signOut=async()=>{await s.OQ.auth.signOut(),i(null),u(null),d(null),m(null)},resetPassword=async e=>{try{let{error:r}=await s.OQ.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")});if(r)return{error:r};return{error:null}}catch(e){return{error:e}}};return(0,n.jsx)(l.Provider,{value:{user:t,dbUser:o,company:c,session:h,isLoading:f,signUp,signIn,signOut,resetPassword},children:r})}function useAuth(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7823:function(e,r,t){"use strict";t.d(r,{OQ:function(){return o}});var n=t(9073),a=t(2601);let s=a.env.NEXT_PUBLIC_SUPABASE_URL||"",l=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"",i=null,o=i||(s&&l||console.warn("Supabase environment variables not configured"),i=(0,n.eI)(s||"https://placeholder.supabase.co",l||"placeholder"))}},function(e){e.O(0,[176,978,971,472,744],function(){return e(e.s=7624)}),_N_E=e.O()}]);