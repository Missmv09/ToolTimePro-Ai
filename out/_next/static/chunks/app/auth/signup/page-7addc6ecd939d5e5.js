(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,...u},d)=>(0,a.createElement)("svg",{ref:d,...s,width:n,height:n,stroke:r,strokeWidth:i?24*Number(l)/Number(n):l,className:["lucide",`lucide-${toKebabCase(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r}},8291:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7216:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8083:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]])},5589:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1295:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7972:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8776:function(e,t,r){Promise.resolve().then(r.bind(r,9407))},9407:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return SignUpPage}});var a=r(7437),s=r(2265),n=r(4033),l=r(1396),i=r.n(l),c=r(3008),o=r(8083),u=r(7972),d=r(2898);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var m=r(1295),p=r(5589),x=r(7216),f=r(9670),y=r(8291),g=r(3549);function SignUpPage(){(0,n.useRouter)();let{signUp:e}=(0,g.useAuth)(),[t,r]=(0,s.useState)({fullName:"",companyName:"",email:"",password:"",confirmPassword:""}),[l,d]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)(""),[b,k]=(0,s.useState)(!1),handleChange=e=>{r(t=>({...t,[e.target.name]:e.target.value})),N("")},validateForm=()=>t.fullName.trim()?t.companyName.trim()?t.email.trim()?t.password.length<6?(N("Password must be at least 6 characters"),!1):t.password===t.confirmPassword||(N("Passwords do not match"),!1):(N("Please enter your email"),!1):(N("Please enter your company name"),!1):(N("Please enter your full name"),!1),handleSubmit=async r=>{if(r.preventDefault(),!validateForm())return;w(!0),N("");let{error:a}=await e(t.email,t.password,t.fullName,t.companyName);if(a){N(a.message),w(!1);return}k(!0),w(!1)};return b?(0,a.jsx)("div",{className:"min-h-screen bg-navy-gradient flex flex-col items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-navy-500 mb-2",children:"Check Your Email"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["We sent a confirmation link to ",(0,a.jsx)("strong",{children:t.email}),". Click the link to activate your account."]}),(0,a.jsx)(i(),{href:"/auth/login",className:"btn-primary w-full inline-block text-center",children:"Go to Login"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-navy-gradient flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center justify-center pt-12 pb-8",children:(0,a.jsxs)(i(),{href:"/",className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gold-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-7 h-7 text-navy-500"})}),(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:"ToolTime Pro"})]})}),(0,a.jsx)("div",{className:"flex-1 flex items-start justify-center px-4 pb-12",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-navy-500 mb-2",children:"Start Your Free Trial"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your account to get started"}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Your Full Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"fullName",value:t.fullName,onChange:handleChange,placeholder:"John Smith",className:"input pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Company Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",name:"companyName",value:t.companyName,onChange:handleChange,placeholder:"Smith's Landscaping",className:"input pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"email",name:"email",value:t.email,onChange:handleChange,placeholder:"john@smithslandscaping.com",className:"input pl-10",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:l?"text":"password",name:"password",value:t.password,onChange:handleChange,placeholder:"At least 6 characters",className:"input pl-10 pr-10",minLength:6,required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,a.jsx)(x.Z,{size:20}):(0,a.jsx)(f.Z,{size:20})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:l?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:handleChange,placeholder:"Confirm your password",className:"input pl-10",minLength:6,required:!0})]})]}),j&&(0,a.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:j}),(0,a.jsx)("button",{type:"submit",disabled:v,className:"btn-secondary w-full py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:v?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"w-5 h-5 border-2 border-navy-500 border-t-transparent rounded-full animate-spin"}),"Creating Account..."]}):(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:["Create Account",(0,a.jsx)(y.Z,{size:20})]})})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-4",children:["By creating an account, you agree to our"," ",(0,a.jsx)("a",{href:"#",className:"underline",children:"Terms of Service"})," and"," ",(0,a.jsx)("a",{href:"#",className:"underline",children:"Privacy Policy"})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,a.jsx)(i(),{href:"/auth/login",className:"font-semibold text-gold-500 hover:text-gold-600",children:"Sign In"})]})})]})})]})}},3549:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=r(7437),s=r(2265),n=r(7823);let l=(0,s.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[c,o]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[p,x]=(0,s.useState)(!0),fetchUserData=async e=>{try{let{data:t,error:r}=await n.OQ.from("users").select("*").eq("id",e).single();if(r&&"PGRST116"!==r.code){console.error("Error fetching user:",r);return}if(t&&(o(t),t.company_id)){let{data:e,error:r}=await n.OQ.from("companies").select("*").eq("id",t.company_id).single();r?console.error("Error fetching company:",r):d(e)}}catch(e){console.error("Error in fetchUserData:",e)}};(0,s.useEffect)(()=>{let initializeAuth=async()=>{try{var e;let{data:{session:t}}=await n.OQ.auth.getSession();m(t),i(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),(null==t?void 0:t.user)&&await fetchUserData(t.user.id)}catch(e){console.error("Error initializing auth:",e)}finally{x(!1)}};initializeAuth();let{data:{subscription:e}}=n.OQ.auth.onAuthStateChange(async(e,t)=>{var r;m(t),i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),(null==t?void 0:t.user)?await fetchUserData(t.user.id):(o(null),d(null)),x(!1)});return()=>{e.unsubscribe()}},[]);let signUp=async(e,t,r,a)=>{try{let{data:s,error:l}=await n.OQ.auth.signUp({email:e,password:t,options:{data:{full_name:r}}});if(l)return{error:l};if(!s.user)return{error:Error("Failed to create user")};let{data:i,error:c}=await n.OQ.from("companies").insert({name:a,email:e}).select().single();if(c)return console.error("Error creating company:",c),{error:c};let{error:o}=await n.OQ.from("users").insert({id:s.user.id,email:e,full_name:r,company_id:i.id,role:"owner"});if(o)return console.error("Error creating user profile:",o),{error:o};return{error:null}}catch(e){return console.error("Signup error:",e),{error:e}}},signIn=async(e,t)=>{try{let{error:r}=await n.OQ.auth.signInWithPassword({email:e,password:t});if(r)return{error:r};return{error:null}}catch(e){return{error:e}}},signOut=async()=>{await n.OQ.auth.signOut(),i(null),o(null),d(null),m(null)},resetPassword=async e=>{try{let{error:t}=await n.OQ.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")});if(t)return{error:t};return{error:null}}catch(e){return{error:e}}};return(0,a.jsx)(l.Provider,{value:{user:r,dbUser:c,company:u,session:h,isLoading:p,signUp,signIn,signOut,resetPassword},children:t})}function useAuth(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7823:function(e,t,r){"use strict";r.d(t,{OQ:function(){return l}});var a=r(9073);let s="https://bqcymeefaizydfogaxcp.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxY3ltZWVmYWl6eWRmb2dheGNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4Nzg0MjQsImV4cCI6MjA4NDQ1NDQyNH0.cTHXYffDL2DSePpTOCJIETtwlt8R1qJesyFs_5I3808";if(!s||!n)throw Error("Missing Supabase environment variables");let l=(0,a.eI)(s,n)},1396:function(e,t,r){e.exports=r(8326)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[326,311,971,472,744],function(){return e(e.s=8776)}),_N_E=e.O()}]);